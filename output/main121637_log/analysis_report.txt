====================================================================================================
ОТЧЕТ ОБ АНАЛИЗЕ ЛОГОВ GEANT4
====================================================================================================
Входной файл: logs/main121637.log
Дата анализа: 2025-10-31 02:08:18

1. ОБЩАЯ СТАТИСТИКА
----------------------------------------------------------------------------------------------------
Всего шагов: 13072
Первичные частицы (Parent ID = 0): 10181 шагов
Вторичные частицы (Parent ID > 0): 2891 шагов
Уникальных треков: 25
Уникальных потоков: 32
Типы частиц: neutron, gamma, Pb208, Pb207, e, I127, alpha, Pb206, B11, C12

2. СТАТИСТИКА ПО ЧАСТИЦАМ
----------------------------------------------------------------------------------------------------

ПЕРВИЧНЫЕ ЧАСТИЦЫ:
--------------------------------------------------

  Частица: neutron
    Количество шагов: 10181
    Количество треков: 1
    Средняя кинетическая энергия: 3.881880 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 45.870834 MeV
    Среднее dEStep (> 0): 0.050968 MeV

ВТОРИЧНЫЕ ЧАСТИЦЫ:
--------------------------------------------------

  Частица: gamma
    Количество шагов: 1675
    Количество треков: 19
    Средняя кинетическая энергия: 3.496088 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 5.661373 MeV
    Среднее dEStep (> 0): 0.033302 MeV

  Частица: Pb208
    Количество шагов: 39
    Количество треков: 1
    Средняя кинетическая энергия: 2.769449 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 0.316785 MeV
    Среднее dEStep (> 0): 0.045255 MeV

  Частица: neutron
    Количество шагов: 335
    Количество треков: 2
    Средняя кинетическая энергия: 3.534789 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 1.012021 MeV
    Среднее dEStep (> 0): 0.033734 MeV

  Частица: Pb207
    Количество шагов: 29
    Количество треков: 2
    Средняя кинетическая энергия: 3.861900 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 0.144060 MeV
    Среднее dEStep (> 0): 0.048020 MeV

  Частица: e
    Количество шагов: 478
    Количество треков: 21
    Средняя кинетическая энергия: 3.521615 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 3.123475 MeV
    Среднее dEStep (> 0): 0.061245 MeV

  Частица: I127
    Количество шагов: 276
    Количество треков: 3
    Средняя кинетическая энергия: 3.300253 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 1.978031 MeV
    Среднее dEStep (> 0): 0.050719 MeV

  Частица: alpha
    Количество шагов: 13
    Количество треков: 1
    Средняя кинетическая энергия: 4.318568 MeV
    Диапазон энергий: [0.092390, 5.000000] MeV

  Частица: Pb206
    Количество шагов: 33
    Количество треков: 2
    Средняя кинетическая энергия: 3.422027 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 0.213474 MeV
    Среднее dEStep (> 0): 0.035579 MeV

  Частица: B11
    Количество шагов: 9
    Количество треков: 1
    Средняя кинетическая энергия: 3.001267 MeV
    Диапазон энергий: [0.369500, 5.000000] MeV
    Сумма dEStep (> 0): 0.129100 MeV
    Среднее dEStep (> 0): 0.129100 MeV

  Частица: C12
    Количество шагов: 4
    Количество треков: 1
    Средняя кинетическая энергия: 1.345850 MeV
    Диапазон энергий: [0.000000, 5.000000] MeV
    Сумма dEStep (> 0): 0.383400 MeV
    Среднее dEStep (> 0): 0.383400 MeV

3. ЭНЕРГЕТИЧЕСКИЙ БАЛАНС
----------------------------------------------------------------------------------------------------

ПЕРВИЧНЫЕ ЧАСТИЦЫ:
  Начальная энергия: 5.000000 MeV
  Конечная энергия: 5.000000 MeV
  Потерянная энергия: 0.000000 MeV
  Сумма всех dEStep: 45.870834 MeV
  Сумма положительных dEStep: 45.870834 MeV

ВТОРИЧНЫЕ ЧАСТИЦЫ:
  Начальная энергия: 93.546510 MeV
  Конечная энергия: 76.833620 MeV
  Потерянная энергия: 16.712890 MeV
  Сумма всех dEStep: 12.961719 MeV
  Сумма положительных dEStep: 12.961719 MeV

4. СВЕРКА С ИТОГОВОЙ СВОДКОЙ
----------------------------------------------------------------------------------------------------
Energy deposit (из сводки): 0.012685 MeV
Energy leakage (из сводки): 4.988900 MeV
Сумма (E_deposit + E_leakage): 5.001585 MeV

⚠️  ВНИМАНИЕ: Лог неполный (пропущены шаги)!
Метод 1 (сумма dEStep) НЕ РАБОТАЕТ для неполных логов.
Используйте ТОЛЬКО Метод 2 (энергетический баланс).

Метод 1 (Сумма положительных dEStep - только потери энергии):
  Рассчитано: 58.832553 MeV
  Абсолютная разница: 58.819868 MeV
  Относительная разница: 463696.2403%
  ❌ НЕ ПРИМЕНИМО для этого лога (шаги пропущены)

Метод 2 (Начальная - Конечная энергия):
  Рассчитано: 16.712890 MeV
  Абсолютная разница: 16.700205 MeV
  Относительная разница: 131653.1730%

Проверка энергетического баланса первичных частиц:
  Начальная энергия первичных: 5.000000 MeV
  E_deposit + E_leakage:       5.001585 MeV
  Разница:                     0.001585 MeV (0.0317%)

✅ ОТЛИЧНО! Энергетический баланс первичных частиц сходится (<1%)

5. СРАВНЕНИЕ ЧАСТОТ ПРОЦЕССОВ
----------------------------------------------------------------------------------------------------
Процесс                        |    Парсинг |     Сводка |    Разница
----------------------------------------------------------------------------------------------------
initStep                       |       6216 |          0 |      +6216
Transportation                 |          0 |       5556 |      -5556
OutOfWorld                     |       5288 |          0 |      +5288
eIoni                          |        400 |        425 |        -25
CoulombScat                    |        367 |        387 |        -20
phot                           |        181 |        198 |        -17
NoProcess                      |        172 |        187 |        -15
neutronInelastic               |        174 |        187 |        -13
Range                          |          0 |          9 |         -9
ionIoni                        |        182 |        190 |         -8
compt                          |         58 |         65 |         -7
simulation                     |          0 |          4 |         -4
Rayl                           |         12 |         15 |         -3
end                            |          0 |          2 |         -2
rms                            |          0 |          1 |         -1
msc                            |          8 |          9 |         -1
eBrem                          |         14 |         15 |         -1
true                           |          0 |          1 |         -1

6. ИНТЕРПРЕТАЦИЯ РЕЗУЛЬТАТОВ
----------------------------------------------------------------------------------------------------

ДВА МЕТОДА ПРОВЕРКИ ЭНЕРГЕТИЧЕСКОГО БАЛАНСА:

МЕТОД 1: Сумма потерь энергии (dEStep)
  • Суммирует все положительные значения dEStep из шагов
  • Работает ТОЛЬКО если ВСЕ шаги записаны в лог
  • ❌ НЕ РАБОТАЕТ для неполных логов (когда пропущены шаги)
  • Причина: если часть шагов не залогирована, сумма будет неполной

МЕТОД 2: Энергетический баланс треков (Начальная - Конечная)
  • Использует начальную и конечную энергию каждого трека
  • ✅ РАБОТАЕТ даже для неполных логов
  • Более надежный метод, не зависит от логирования промежуточных шагов

ПРОВЕРКА ЭНЕРГЕТИЧЕСКОГО БАЛАНСА:
  • Начальная энергия первичных частиц должна равняться
    сумме Energy deposit + Energy leakage из итоговой сводки
  • Это фундаментальный закон сохранения энергии
  • Если разница <1%, энергетический баланс сходится отлично

----------------------------------------------------------------------------------------------------

Первичные частицы (Parent ID = 0):
  • Это исходные частицы, запущенные в симуляции
  • Их начальная энергия - это входная энергия симуляции

Вторичные частицы (Parent ID > 0):
  • Это частицы, рожденные в процессе взаимодействия первичных
  • Они могут создаваться через процессы: ionIoni, eBrem, compt, и др.
  • Их энергия изначально взята из первичных частиц

Energy deposit:
  • Энергия, поглощенная материалом (ионизация)
  • Вызывает повреждения в материале

Energy leakage:
  • Энергия частиц, покинувших объем симуляции
  • Не поглощается материалом

Возможные причины малых расхождений (<5%):
  1. Округления при конверсии единиц (eV ↔ keV ↔ MeV)
  2. Численная точность при расчетах в Geant4
  3. NIEL energy (неионизирующие потери энергии)
  4. Энергетические пороги отслеживания частиц

====================================================================================================